#!/usr/bin/env python3
"""
Monitor Layout Manager - macOS GUI Launcher
Double-click to open the monitor layout manager GUI.
"""

import sys
import os
import subprocess

# Get the script directory (where this executable is located)
SCRIPT_DIR = os.path.dirname(os.path.abspath(__file__))

def main():
    # Change to the project directory
    os.chdir(SCRIPT_DIR)
    
    # Check if virtual environment exists and has dependencies
    venv_python = os.path.join(SCRIPT_DIR, '.venv', 'bin', 'python3')
    
    if os.path.exists(venv_python):
        # Use virtual environment
        try:
            subprocess.run([venv_python, 'main.py'], check=True)
        except subprocess.CalledProcessError:
            # Fallback to system python with error handling
            subprocess.run([sys.executable, 'main.py'])
    else:
        # No virtual environment, try system python
        print("ðŸ”„ Setting up Monitor Layout Manager...")
        print("ðŸ’¡ Running installer for first-time setup...")
        
        # Run installer first
        subprocess.run(['./install.sh'])
        
        # Then try to launch
        if os.path.exists(venv_python):
            subprocess.run([venv_python, 'main.py'])
        else:
            subprocess.run([sys.executable, 'main.py'])

if __name__ == '__main__':
    main()
